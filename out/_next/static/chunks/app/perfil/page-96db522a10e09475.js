(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550],{4018:function(e,t,a){Promise.resolve().then(a.bind(a,2111))},2111:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var s=a(7437),r=a(2265),l=a(1211),n=a(3284),i=a(9116),o=a(9205);let c=(0,o.Z)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),d=(0,o.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var x=a(7692),m=a(1047);let h=(0,o.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),u=(0,o.Z)("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);var p=a(1723),g=a(9388),f=a(6595);let b=(0,o.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var y=a(7648),v=a(9376);let j=e=>{let{status:t}=e,a={confirmado:"bg-emerald-50 text-emerald-600 border-emerald-100",cancelado:"bg-red-50 text-red-600 border-red-100",pendente:"bg-amber-50 text-amber-600 border-amber-100"}[t]||"bg-gray-50 text-gray-500 border-gray-100";return(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border ".concat(a),children:t})},w=()=>(0,s.jsx)("div",{className:"bg-white p-6 rounded-3xl border border-gray-100 animate-pulse",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"space-y-3 flex-1",children:[(0,s.jsx)("div",{className:"h-4 w-24 bg-gray-100 rounded"}),(0,s.jsx)("div",{className:"h-6 w-48 bg-gray-200 rounded"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"h-4 w-20 bg-gray-100 rounded"}),(0,s.jsx)("div",{className:"h-4 w-20 bg-gray-100 rounded"})]})]}),(0,s.jsx)("div",{className:"h-10 w-28 bg-gray-100 rounded-xl"})]})});function N(){let[e,t]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0),[N,k]=(0,r.useState)("proximos"),[z,Z]=(0,r.useState)(""),[C,S]=(0,r.useState)({id:null,nota:5,comentario:""}),_=(0,v.useRouter)();(0,r.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user_name");if(!e){_.push("/login");return}t&&Z(t),M()},[]);let M=async()=>{try{let e=await i.Z.get("/cliente/meus-agendamentos");t(Array.isArray(e.data)?e.data:[])}catch(e){console.error("Erro ao carregar agendamentos")}finally{o(!1)}},A=async e=>{if(window.confirm("Deseja realmente cancelar este agendamento?"))try{await i.Z.patch("/agendamentos/".concat(e,"/cancelar")),M()}catch(e){alert("Erro ao cancelar.")}},E=(0,r.useMemo)(()=>{let t=new Date;return e.filter(e=>{let a=new Date(e.data_hora_inicio),s="cancelado"===e.StatusAgendamento.nome;return"proximos"===N?a>=t&&!s:a<t||s}).sort((e,t)=>new Date(e.data_hora_inicio).getTime()-new Date(t.data_hora_inicio).getTime())},[e,N]);return(0,s.jsxs)("main",{className:"min-h-screen bg-[#fdfbf9] text-slate-900",children:[(0,s.jsx)(l.W,{blackText:!0}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto pt-32 pb-20 px-6",children:[(0,s.jsxs)("section",{className:"relative overflow-hidden bg-white p-8 rounded-[2.5rem] shadow-sm border border-orange-100/50 mb-10",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:(0,s.jsx)(c,{size:120})}),(0,s.jsxs)("div",{className:"relative flex flex-col md:flex-row justify-between items-center gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsx)("div",{className:"h-20 w-20 bg-gradient-to-br from-[#e1b01a] to-[#c49a16] rounded-full p-0.5 shadow-inner",children:(0,s.jsx)("div",{className:"h-full w-full bg-white rounded-full flex items-center justify-center text-[#e1b01a]",children:(0,s.jsx)("span",{className:"text-2xl font-serif italic font-bold",children:z.charAt(0)})})}),(0,s.jsxs)("div",{className:"text-center md:text-left",children:[(0,s.jsx)("p",{className:"text-[#e1b01a] text-xs font-bold uppercase tracking-[0.2em] mb-1",children:"Bem-vinda de volta"}),(0,s.jsx)("h1",{className:"text-3xl font-serif font-medium text-slate-800 tracking-tight",children:z})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{className:"p-3 bg-slate-50 text-slate-400 rounded-2xl hover:bg-slate-100 transition shadow-sm",children:(0,s.jsx)(d,{size:20})}),(0,s.jsxs)("button",{onClick:()=>{localStorage.clear(),window.location.href="/login"},className:"flex items-center gap-2 px-6 py-3 bg-red-50 text-red-500 rounded-2xl text-xs font-bold uppercase tracking-widest hover:bg-red-100 transition",children:[(0,s.jsx)(x.Z,{size:16})," Sair"]})]})]})]}),(0,s.jsx)("div",{className:"flex p-1.5 bg-white rounded-2xl border border-gray-100 w-fit mb-12 shadow-sm",children:[{id:"proximos",label:"Pr\xf3ximos",icon:m.Z},{id:"historico",label:"Hist\xf3rico",icon:h}].map(e=>(0,s.jsxs)("button",{onClick:()=>k(e.id),className:"flex items-center gap-2 px-8 py-3 rounded-xl text-sm font-bold transition-all ".concat(N===e.id?"bg-[#e1b01a] text-white shadow-md":"text-slate-400 hover:text-slate-600"),children:[(0,s.jsx)(e.icon,{size:16}),e.label]},e.id))}),(0,s.jsx)("div",{className:"space-y-6",children:a?[,,,].fill(0).map((e,t)=>(0,s.jsx)(w,{},t)):0===E.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 bg-white rounded-[3rem] border border-dashed border-gray-200",children:[(0,s.jsx)("div",{className:"bg-orange-50 p-6 rounded-full mb-4 text-[#e1b01a]",children:(0,s.jsx)(u,{size:40})}),(0,s.jsx)("p",{className:"text-slate-400 font-medium",children:"N\xe3o encontramos registos aqui."}),(0,s.jsx)(y.default,{href:"/agendar",className:"mt-4 px-8 py-3 bg-slate-900 text-white rounded-full text-xs font-bold uppercase tracking-widest hover:bg-slate-800 transition",children:"Fazer Agendamento"})]}):E.map(e=>(0,s.jsx)("div",{className:"group bg-white p-6 md:p-8 rounded-[2rem] border border-gray-100 shadow-sm hover:shadow-xl hover:shadow-orange-900/5 transition-all duration-300",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(j,{status:e.StatusAgendamento.nome}),(0,s.jsx)("h3",{className:"text-xl font-serif font-medium text-slate-800",children:e.Servico.nome_servico})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-y-2 gap-x-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-slate-500 text-sm",children:[(0,s.jsx)(m.Z,{size:16,className:"text-[#e1b01a]"}),(0,s.jsx)("span",{className:"capitalize",children:new Date(e.data_hora_inicio).toLocaleDateString("pt-PT",{weekday:"long",day:"numeric",month:"long"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-slate-500 text-sm",children:[(0,s.jsx)(p.Z,{size:16,className:"text-[#e1b01a]"}),new Date(e.data_hora_inicio).toLocaleTimeString("pt-PT",{hour:"2-digit",minute:"2-digit"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-slate-500 text-sm",children:[(0,s.jsx)(c,{size:16,className:"text-[#e1b01a]"}),e.Funcionario.Usuario.nome]})]})]}),(0,s.jsx)("div",{className:"w-full md:w-auto pt-4 md:pt-0 border-t md:border-t-0 border-gray-50",children:"proximos"===N?(0,s.jsxs)("button",{onClick:()=>A(e.id),className:"w-full md:w-auto flex items-center justify-center gap-2 px-6 py-3 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-2xl transition-all font-bold text-xs uppercase tracking-tighter",children:[(0,s.jsx)(g.Z,{size:18})," Cancelar Reserva"]}):e.feedback_nota?(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-amber-500 bg-amber-50 px-6 py-3 rounded-2xl text-xs font-bold border border-amber-100",children:[(0,s.jsx)(f.Z,{size:16,fill:"currentColor"})," ",e.feedback_nota,"/5 Avaliado"]}):"cancelado"!==e.StatusAgendamento.nome&&(0,s.jsxs)("button",{onClick:()=>S({...C,id:e.id}),className:"w-full md:w-auto flex items-center justify-center gap-2 bg-[#e1b01a] text-white px-8 py-3.5 rounded-2xl text-xs font-bold uppercase tracking-widest shadow-lg shadow-yellow-600/20 hover:bg-yellow-600 transition-all",children:[(0,s.jsx)(b,{size:16})," Avaliar"]})})]})},e.id))})]}),C.id&&(0,s.jsx)("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md flex items-center justify-center z-[100] p-6",children:(0,s.jsxs)("div",{className:"bg-white p-10 rounded-[3rem] max-w-sm w-full shadow-2xl animate-in zoom-in-95 duration-300",children:[(0,s.jsx)("div",{className:"w-16 h-1 w-12 bg-slate-100 mx-auto mb-8 rounded-full"}),(0,s.jsx)("h3",{className:"text-2xl font-serif font-medium mb-2 text-center text-slate-800",children:"Sua Experi\xeancia"}),(0,s.jsx)("p",{className:"text-center text-slate-400 text-sm mb-8",children:"Como se sentiu no seu atendimento?"}),(0,s.jsx)("div",{className:"flex justify-center gap-3 mb-10 text-amber-300",children:[1,2,3,4,5].map(e=>(0,s.jsx)("button",{onClick:()=>S({...C,nota:e}),children:(0,s.jsx)(f.Z,{size:36,fill:e<=C.nota?"currentColor":"none",className:"transition-all ".concat(e<=C.nota?"scale-110":"opacity-30 hover:opacity-100")})},e))}),(0,s.jsx)("textarea",{className:"w-full p-5 bg-slate-50 border-none rounded-[1.5rem] mb-8 text-sm outline-none focus:ring-2 focus:ring-[#e1b01a] transition-all resize-none",placeholder:"Conte-nos os detalhes...",rows:4,value:C.comentario,onChange:e=>S({...C,comentario:e.target.value})}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsx)("button",{onClick:async()=>{try{await i.Z.post("/cliente/feedback/".concat(C.id),{nota:C.nota,comentario:C.comentario}),S({id:null,nota:5,comentario:""}),M()}catch(e){alert("Erro ao enviar.")}},className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-bold text-xs uppercase tracking-[0.2em] shadow-xl hover:bg-slate-800 transition",children:"Enviar Avalia\xe7\xe3o"}),(0,s.jsx)("button",{onClick:()=>S({id:null,nota:5,comentario:""}),className:"w-full py-3 text-slate-400 font-bold text-xs uppercase tracking-widest",children:"Voltar"})]})]})}),(0,s.jsx)(n.$,{})]})}},9116:function(e,t,a){"use strict";let s=a(3464).Z.create({baseURL:"http://localhost:3333",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t=localStorage.getItem("token");return console.log("Intercetor Axios - Token encontrado:",t?"Sim":"N\xe3o"),t&&(e.headers.Authorization="Bearer ".concat(t)),e}),t.Z=s},1047:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9388:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1723:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6595:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])}},function(e){e.O(0,[854,771,360,971,117,744],function(){return e(e.s=4018)}),_N_E=e.O()}]);