(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{1265:function(e,t,a){Promise.resolve().then(a.bind(a,481))},481:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var l=a(7437),s=a(2265),n=a(9376),r=a(1211),o=a(3284),i=a(2369),c=a(3041),d=a(9345);let u=(0,a(9205).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var m=a(7769),x=a(2208),p=a(1817),h=a(9116);function f(){(0,n.useRouter)();let[e,t]=(0,s.useState)("login"),[a,f]=(0,s.useState)(!1),[g,b]=(0,s.useState)(null),[y,j]=(0,s.useState)(!1),[v,N]=(0,s.useState)({nome:"",email:"",telefone:"",senha:"",confirmarSenha:""}),w=e=>{let{name:t,value:a}=e.target;if("telefone"===t){let e=a.replace(/\D/g,"").slice(0,7);N({...v,[t]:e});return}N({...v,[t]:a})},k=async a=>{a.preventDefault(),b(null),f(!0);try{if("registro"===e){if(7!==v.telefone.length){b("O telefone deve ter 7 d\xedgitos."),f(!1);return}if(v.senha!==v.confirmarSenha){b("As senhas n\xe3o coincidem."),f(!1);return}await h.Z.post("/auth/registrar",{nome:v.nome,email:v.email,telefone:v.telefone,senha:v.senha}),alert("Conta criada com sucesso!"),t("login")}else{let e=await h.Z.post("/auth/login",{email:v.email,password:v.senha});localStorage.setItem("token",e.data.token),localStorage.setItem("user_role",e.data.role),localStorage.setItem("user_name",e.data.usuario.nome);let t=e.data.role,a=e.data.token;if("admin"===t||"funcionario"===t||"profissional"===t||"recepcionista"===t){let e="localhost"!==window.location.hostname?"https://admin.maddietavares.cv":"http://localhost:3001";console.log("Redirecionando para Dashboard em:",e),window.location.href="".concat(e,"/login-bypass?token=").concat(a,"&role=").concat(t)}else window.location.href="/perfil"}}catch(e){var l,s;b((null===(s=e.response)||void 0===s?void 0:null===(l=s.data)||void 0===l?void 0:l.message)||"Erro na autentica\xe7\xe3o.")}finally{f(!1)}};return(0,l.jsxs)("div",{className:"flex flex-col min-h-screen bg-[#fcfaf8]",children:[(0,l.jsx)(r.W,{}),(0,l.jsxs)("main",{className:"flex-1 relative flex items-center justify-center p-6 py-28",children:[(0,l.jsx)("div",{className:"absolute inset-0 z-0",children:(0,l.jsx)("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url('/bg-spa.jpg')",filter:"brightness(0.4) blur(3px)"}})}),(0,l.jsx)("div",{className:"relative z-10 w-full max-w-md",children:(0,l.jsxs)("div",{className:"bg-white rounded-4xl shadow-2xl p-8 md:p-12 border border-white/20",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("img",{src:"/images/logo.png",alt:"Maddie Tavares",className:"h-16 mx-auto mb-2"}),(0,l.jsx)("p",{className:"text-[#d4af37] italic text-xs tracking-[0.3em] uppercase font-light",children:"beauty boutique"})]}),(0,l.jsxs)("div",{className:"flex gap-2 mb-8 bg-gray-50 p-1 rounded-2xl",children:[(0,l.jsx)("button",{type:"button",onClick:()=>t("login"),className:"flex-1 py-3 rounded-xl font-semibold transition-all ".concat("login"===e?"bg-white text-[#d4af37] shadow-sm":"text-gray-400"),children:"Login"}),(0,l.jsx)("button",{type:"button",onClick:()=>t("registro"),className:"flex-1 py-3 rounded-xl font-semibold transition-all ".concat("registro"===e?"bg-white text-[#d4af37] shadow-sm":"text-gray-400"),children:"Registro"})]}),g&&(0,l.jsx)("div",{className:"mb-6 p-3 bg-red-50 text-red-600 text-xs rounded-xl text-center border border-red-100",children:g}),(0,l.jsxs)("form",{onSubmit:k,className:"space-y-4",children:["registro"===e&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-[10px] font-bold text-gray-400 uppercase ml-2 mb-1",children:"Nome Completo"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(i.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-300",size:18}),(0,l.jsx)("input",{type:"text",name:"nome",required:!0,value:v.nome,onChange:w,className:"w-full pl-12 pr-4 py-3.5 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#d4af37] transition-all text-sm outline-none",placeholder:"Nome e apelido"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-[10px] font-bold text-gray-400 uppercase ml-2 mb-1",children:"Telefone (7 d\xedgitos)"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(c.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-300",size:18}),(0,l.jsx)("input",{type:"tel",name:"telefone",required:!0,value:v.telefone,onChange:w,className:"w-full pl-12 pr-4 py-3.5 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#d4af37] transition-all text-sm outline-none",placeholder:"9XXXXXX"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-[10px] font-bold text-gray-400 uppercase ml-2 mb-1",children:"Email"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(d.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-300",size:18}),(0,l.jsx)("input",{type:"email",name:"email",required:!0,value:v.email,onChange:w,className:"w-full pl-12 pr-4 py-3.5 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#d4af37] transition-all text-sm outline-none",placeholder:"exemplo@mail.com"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-[10px] font-bold text-gray-400 uppercase ml-2 mb-1",children:"Senha"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(u,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-300",size:18}),(0,l.jsx)("input",{type:y?"text":"password",name:"senha",required:!0,value:v.senha,onChange:w,className:"w-full pl-12 pr-12 py-3.5 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#d4af37] transition-all text-sm outline-none",placeholder:"••••••••"}),(0,l.jsx)("button",{type:"button",onClick:()=>j(!y),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-300 hover:text-[#d4af37]",children:y?(0,l.jsx)(m.Z,{size:18}):(0,l.jsx)(x.Z,{size:18})})]})]}),"registro"===e&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-[10px] font-bold text-gray-400 uppercase ml-2 mb-1",children:"Confirmar Senha"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(u,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-300",size:18}),(0,l.jsx)("input",{type:"password",name:"confirmarSenha",required:!0,value:v.confirmarSenha,onChange:w,className:"w-full pl-12 pr-4 py-3.5 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#d4af37] transition-all text-sm outline-none",placeholder:"Repita a senha"})]})]}),(0,l.jsx)("button",{type:"submit",disabled:a,className:"w-full py-4 bg-[#d4af37] hover:bg-[#b8962e] text-white rounded-2xl font-bold shadow-xl shadow-yellow-700/20 transition-all flex items-center justify-center gap-3 mt-6 disabled:opacity-50",children:a?(0,l.jsx)(p.Z,{className:"animate-spin",size:20}):"login"===e?"Entrar":"Criar Conta"})]})]})})]}),(0,l.jsx)(o.$,{})]})}},9116:function(e,t,a){"use strict";let l=a(3464).Z.create({baseURL:"http://localhost:3333",headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=localStorage.getItem("token");return console.log("Intercetor Axios - Token encontrado:",t?"Sim":"N\xe3o"),t&&(e.headers.Authorization="Bearer ".concat(t)),e}),t.Z=l},7769:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});let l=(0,a(9205).Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},2208:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});let l=(0,a(9205).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1817:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});let l=(0,a(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}},function(e){e.O(0,[854,771,360,971,117,744],function(){return e(e.s=1265)}),_N_E=e.O()}]);